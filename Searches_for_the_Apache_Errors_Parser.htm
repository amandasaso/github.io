<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="no-feedback" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Search|Suggested Searches">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Searches for the Apache Errors Parser</title>
        <link href="Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="Resources/Stylesheets/Styles.css" rel="stylesheet" />
        <script src="Resources/Scripts/jquery.min.js">
        </script>
        <script src="Resources/Scripts/plugins.min.js">
        </script>
        <script src="Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop" style="display: none;"><a href="Default.htm#Searches_for_the_Apache_Errors_Parser.htm">Open topic with navigation</a>
        </p>
        <script type="text/javascript">/* <![CDATA[ */
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-16579649-1']);
			_gaq.push(['_trackPageview']);
			(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
		/* ]]> */</script>
        <h1>Searches for the Apache Errors Parser</h1>
        <p>The following searches were built for use with the Apache Errors Parser. Copy and paste these searches into the search query field and save them for use later. You can also set up <a href="Scheduling_a_Search.htm">threshold alerts</a> for the Critical Operations Errors to be notified in the event critical errors occur.</p>
        <p>To obtain the best results possible, be sure to make the following modifications to the example queries:</p>
        <ul>
            <li value="1">Use a specific keyword expression or metadata search to limit the initial results to Apache logs. [Replace _the metadata search expression "sourceName=*error_log* AND _sourceCategory=*apache*" in the examples]</li>
            <li value="2">Change the time range and the timeslice values to tailor the results to your needs.</li>
        </ul>
        <h2>Identify Critical Operations Errors</h2>
        <p><b>Critical Log Messages</b>
        </p>
        <p>This search returns the most critical log messages in the Apache error log.</p>
        <ul>
            <li value="1">Suggested Time Range: -10m; Set to run every 15 minutes&#160;with an alert for 1 or more results found.</li>
            <li value="2"> <![CDATA[ 	]]>_sourceName=*error_log* AND _sourceCategory=*apache* AND ("emerg" OR "alert" OR "crit") | parse using public/apache/error</li>
        </ul>
        <p><b>Log Level Counts</b>
        </p>
        <p>Returns a count of all messages by log level (error, warn etc.) to give administrators quick insight into whether they need to investigate further. 	</p>
        <ul>
            <li value="1">Suggested Time Rang: -15m </li>
            <li value="2">_sourceName=*error_log* AND _sourceCategory=*apache* | parse using public/apache/error | where log_level !="" | count by log_level | sort by _count</li>
        </ul>
        <p><b>Server Stops and Starts Over Time</b> <![CDATA[ ]]></p>
        <p>Returns trend data of how many server start and stop events took place over a period of time. </p>
        <ul>
            <li value="1">Suggested Time Range:  	-6h	</li>
            <li value="2">_sourceName=*error_log* AND _sourceCategory=*apache* | parse using public/apache/error | if(reason matches "caught SIGTERM, shutting down", 1, 0) as server_stop | if(reason matches "*-- resuming normal operations",1, 0) as server_start | timeslice by 1h | sum(server_stop) as server_stops, sum(server_start) as server_starts by _timeslice</li>
        </ul>
        <h2>Identify Top Error Characteristics</h2>
        <p><b>Top Error Reasons</b>
        </p>
        <p>This search returns the top Apache error log reasons. 	</p>
        <ul>
            <li value="1">Suggested Time Range: -6h 	</li>
            <li value="2">_sourceName=*error_log* AND _sourceCategory=*apache* | parse using public/apache/error | count by reason | top 100 reason by _count</li>
        </ul>
        <p><b>Top Clients Causing Errors</b>
        </p>
        <p>Returns the top source IP addresses that cause errors, which should correlate with the corresponding <a href="Searches_for_the_Apache_Access_Parser.htm">access log searches</a> to determine the most malicious clients. 	</p>
        <ul>
            <li value="1">Suggested Time Range: -6h</li>
            <li value="2">_sourceName=*error_log* AND _sourceCategory=*apache* | parse using public/apache/error | count_frequent src_ip | limit 100</li>
        </ul>
        <p>&#160;</p>
        <p>&#160;</p>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom" style="display: none;"><a href="Default.htm#Searches_for_the_Apache_Errors_Parser.htm">Open topic with navigation</a>
        </p>
    </body>
</html>