<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="no-feedback" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Setting Up| Installed Collectors and Sources|Step 3. Add a Source">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Configuring a Script Action</title>
        <link href="Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="Resources/Stylesheets/Styles.css" rel="stylesheet" />
        <script src="Resources/Scripts/jquery.min.js">
        </script>
        <script src="Resources/Scripts/plugins.min.js">
        </script>
        <script src="Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop" style="display: none;"><a href="Default.htm#Collecting_from_a_Script_Action.htm">Open topic with navigation</a>
        </p>
        <script type="text/javascript">/* <![CDATA[ */
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-16579649-1']);
			_gaq.push(['_trackPageview']);
			(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
		/* ]]> */</script>
        <h1>Configuring a Script Action</h1>
        <p>Unlike all other Source varieties, a Script Action receives data uploads triggered by a scheduled search. The script you create defines how data is consumed; for example, you could fire SNMP traps based on the result of the search. </p>
        <p>After setting up an Script Action, the next step is to construct a scheduled search. Each time the search query executes, the Collector runs the script configured in the Script Action.</p>
        <p>
            <img src="Resources/Images/Alert_Source_illust_471x218.png" style="width: 471;height: 218;" />
        </p>
        <p>&#160;</p>
        <h2>Step 1. Set up the Script Action.</h2>
        <p>Script Actions can be added to any <span class="MyVariablesCollector">Collector</span> running the latest version of <span class="MyVariablesCompanyName">Sumo Logic</span> Collector software.</p>
        <p>When creating the script, make sure the script parses the search results in a manner that best suits your organization, keeping in mind that the file is in  JSON format. The script configured in the Script Action is permitted to call other external scripts.</p>
        <p style="font-weight: bold;">To configure a Script Action:</p>
        <ol>
            <li value="1">In the Web Application, select <b>Manage &gt; Collectors</b>. <br /><br /><img src="Resources/Images/Manage_menu_Collectors_424x93.png" style="width: 424;height: 93;" /><br /><br /></li>
            <li value="2">Find the name of the installed Collector to which you'd like to add a Source. Click <b>Add...</b> then choose<b> Add Script Action</b> from the pop-up menu.<br /><br /><img src="Resources/Images/Alert_Source_add_Alert_214x98.png" style="width: 214;height: 98;" /><br /><br /></li>
        </ol>
        <ol>
            <li value="3">Enter a <b>Name</b> to display for the Script Action. Description is optional. </li>
            <li value="4">If you'd like to specify a timeout for your script, select <b>Specify a timeout for your command</b>. Setting a timeout ensures that a script is killed, making sure that resources aren't fully consumed. If you choose to set a timeout, make sure to select a generous amount of time to make sure that the script has enough time to finish running.</li>
            <li value="5">For <b>Command</b>, choose the type of command you're going to use. </li>
            <li value="6">In the <b>Script</b> text box, type the script's path. The script itself cannot be typed in the Script text box.</li>
            <li value="7">For <b>Working Directory</b>, specify a directory if you need your script action  to execute in a different directory than the Collector's install directory.</li>
            <li value="8">Click <b>Save</b>.</li>
        </ol>
        <p>&#160;</p>
        <h2>Step 2. Set up a Scheduled Search.</h2>
        <p>Once the Script Action has been added to your <span class="MyVariablesCompanyName">Sumo Logic</span> account, it's time to create a scheduled search. Note that the Search name will appear in the output file, along with the query.</p>
        <p>The first time the scheduled search executes, output files will begin to be generated.</p>
        <p><b>To schedule a search:</b>
        </p>
        <ol>
            <li value="1">In the Search tab, type the search you'd like to use with the Script Action, then click <b>Save As</b> below the search field. </li>
        </ol>
        <ol data-mc-continue="true">
            <li value="2">For <b>Search name</b>, enter a name for the search. If you'd like, type an optional description to help you identify this search. </li>
            <li value="3">Choose a <b>Timerange</b> option that will be the default range when you run the saved search.</li>
        </ol>
        <ol>
            <li value="4">Choose an option from the <a href="Sched_a_search.htm"><b>Run frequency</b></a> menu.<br /></li>
        </ol>
        <ol>
            <li value="5">For<b> Alert Condition</b>, select <b>Notify me every time upon search completion </b>to make sure that alerts are sent to the Script Action.</li>
            <li value="6">For <b>Alert&#160;Type</b>, select <b>Script Action</b>.</li>
        </ol>
        <ol>
            <li value="7">For<b> Script Action</b>, select the name of the Script Action (displayed with its Collector's name) from the pop up menu.</li>
            <li value="8">Click <b>Save</b>.</li>
        </ol>
        <p class="Indent">
            <img src="Resources/Images/Alert_Source_sched_search_507x483.png" style="width: 507;height: 483;" />
        </p>
        <p>&#160;</p>
        <h2>About the search results file</h2>
        <p>The <span class="MyVariablesCompanyName">Sumo Logic</span> file is the result of a scheduled search written in JSON&#160;format. It includes the results of the scheduled search, as well as information about the time range of the search. By default, the files are stored in the Collector installation directory. Every three hours the files are purged.</p>
        <p>A maximum of 10,000 messages are included in the file. Each message in the search results is marked with the Collector's metadata and a time stamp. At the end of each file you'll find information about the scheduled search:</p>
        <p>
            <img src="Resources/Images/Alert_Source_Sumo_MIB_772x252.png" style="width: 772;height: 252;" />
        </p>
        <p class="Caption"><b>A.</b> End of scheduled search (Unix timestamp)</p>
        <p class="Caption"><b>B.</b> Beginning time of scheduled search.</p>
        <p class="Caption"><b>C.</b> User account.<br /><b>D.</b> Name of the scheduled search (reflects the name saved with the search; can be modified)</p>
        <p class="Caption"><b>E.</b> Query saved as the scheduled search.</p>
        <p class="Caption"><b>F.</b> Click the URL&#160;to view the results of the search in a web page.</p>
        <p class="Caption"><b>G</b>. Number of messages.</p>
        <p class="figure-number">&#160;</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom" style="display: none;"><a href="Default.htm#Collecting_from_a_Script_Action.htm">Open topic with navigation</a>
        </p>
    </body>
</html>