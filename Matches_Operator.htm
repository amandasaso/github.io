<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="no-feedback" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Operators &amp; Expressions">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Matches Operator</title>
        <link href="Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="Resources/Stylesheets/Styles.css" rel="stylesheet" />
        <script src="Resources/Scripts/jquery.min.js">
        </script>
        <script src="Resources/Scripts/plugins.min.js">
        </script>
        <script src="Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop" style="display: none;"><a href="Default.htm#Matches_Operator.htm">Open topic with navigation</a>
        </p>
        <script type="text/javascript">/* <![CDATA[ */
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-16579649-1']);
			_gaq.push(['_trackPageview']);
			(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
		/* ]]> */</script>
        <h1>Matches Operator</h1>
        <p>The <b>matches operator</b> can be used to match a string to a pattern. The return of the operator is boolean; the operator can be used with <b>where</b> or <b>if</b> expressions.</p>
        <p>Matches operators can be used in Dashboard Monitors, and are very commonly used in conjunction with other operators to build robust queries.</p>
        <p><b>Syntax:</b>
        </p>
        <ul>
            <li value="1">... [string expression] matches [pattern] ...</li>
            <li value="2">... if [string expression] matches [pattern] ...</li>
            <li value="3">... where [string expression] matches [pattern]...</li>
            <li value="4">... ! [string expression] matches [pattern]</li>
        </ul>
        <p>&#160;</p>
        <h3>Examples</h3>
        <p style="font-weight: bold;">Identifying the browsers and operating systems used to access your website</p>
        <p style="font-weight: normal;">Running a query containing a matches operator on Apache Access logs can show you the breakdown of the devices and browsers that are accessing your site. You can then create a Dashboard with this query. We've used a transpose operator in this query to allow us to name the axis of our column chart.</p>
        <p style="font-weight: normal;">Running a search like:</p>
        <p class="Indent" style="font-weight: bold;">_sourceCategory=Apache/Access<br />| extract "\"[A-Z]+ \S+ HTTP/[\d\.]+\" \S+ \S+ \S+ \"(?&lt;agent&gt;[^\"]+?)\""<br />| if (agent matches "*Windows NT*","Windows","") as OS <br />| if (agent matches "*Macintosh*","MacOS","") as OS <br />| if (agent matches "*iPad*","iPad","") as OS <br />| if (agent matches "*iPhone*","iPhone","") as OS <br />| if (agent matches "*Android*","Android","") as OS <br />| if (OS == "","Other","") as OS <br />| if (agent matches "*MSIE*","Internet Explorer","") as Browser <br />| if (agent matches "*Firefox*","Firefox","") as Browser <br />| if (agent matches "*Safari*","Safari","") as Browser <br />| if (agent matches "*Chrome*","Chrome","") as Browser <br />| if (Browser == "","Other","") as Browser <br />| count(agent) by OS,Browser <br />| transpose row os column browser as * </p>
        <p>Produces aggregate results similar to:</p>
        <p>
            <img src="Resources/Images/Matches_operator_660x248.png" style="width: 660;height: 248;" />
        </p>
        <p>&#160;</p>
        <p style="font-weight: bold;">Viewing errors and warnings over time</p>
        <p style="font-weight: bold;"><span style="font-weight: normal;">In this example, we'll run a query against Windows logs to see the distribution of errors and warnings over the previous hours. Using a timeslice operator in the query breaks the results into one hour buckets.</span>
        </p>
        <p style="font-weight: normal;">Running a search like:</p>
        <p class="Indent" style="font-weight: bold;">_sourceCategory=OS/Windows (error or warning)<br />| parse "Type = \"*\";" as evtType<br />| if (_raw matches "*EventType = Error*",1,0) as errors<br />| if (_raw matches "*EventType = Warning*",1,0) as warnings<br />| if (evtType matches "Error*",1,errors) as errors <br />| if (evtType matches "Warning*",1,warnings) as warnings<br />| timeslice by 1h<br />| sum(errors) as errors, sum(warnings) as warnings by _timeslice<br />| sort _timeslice asc</p>
        <p>Produces results similar to:</p>
        <p>
            <img src="Resources/Images/Matches_errors_warning_587x271.png" style="width: 587;height: 271;" />
        </p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom" style="display: none;"><a href="Default.htm#Matches_Operator.htm">Open topic with navigation</a>
        </p>
    </body>
</html>