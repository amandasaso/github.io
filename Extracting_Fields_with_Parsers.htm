<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="no-feedback" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Search|Parsing">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Using Parser Libary</title>
        <link href="Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="Resources/Stylesheets/Styles.css" rel="stylesheet" />
        <script src="Resources/Scripts/jquery.min.js">
        </script>
        <script src="Resources/Scripts/plugins.min.js">
        </script>
        <script src="Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop" style="display: none;"><a href="Default.htm#Extracting_Fields_with_Parsers.htm">Open topic with navigation</a>
        </p>
        <script type="text/javascript">/* <![CDATA[ */
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-16579649-1']);
			_gaq.push(['_trackPageview']);
			(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
		/* ]]> */</script>
        <p>To expedite searching and analysis for common log types, Sumo Logic offers <b>Parser Libraries</b>.  Each Parser Library is a set of parsing definitions written to automatically extract field values from a specific type of raw data. Rather than writing field parsing rules yourself,  you can apply a parser library to your search to automatically extract fields from the logs, and then use the resulting parsed fields to extend your query.</p>
        <p>Currently Sumo Logic offers Parser Libraries for the following:</p>
        <ul>
            <li value="1"><a href="Parsing_Apache_Access_Logs.htm">Apache Access Logs</a>
            </li>
            <li value="2"><a href="Parsing_Apache_Errors.htm">Apache Error Logs</a>
            </li>
            <li value="3"><a href="Parsing_Cisco_ASA_Logs.htm">Cisco ASA&#160;Logs</a>
            </li>
            <li value="4"><a href="Parsing_Microsoft_IIS_Logs.htm">Microsoft IIS&#160;Logs</a>
            </li>
        </ul>
        <p>&#160;</p>
        <h2>Using Parser Libary</h2>
        <p>So, for example, if you are collecting Apache logs and you want to automatically parse common fields from those logs, you can apply the Apache Parsing Library to your search. </p>
        <p> In the Messages tab, the parsed field values appear in labeled columns:<br /><br /><img src="Resources/Images/parsed-field-results2_597x199.png" style="width: 597;height: 199;" /></p>
        <h2>Leveraging Parsed Fields in Searches</h2>
        <p>To invoke the parser, you'll use the <b>parse</b> <![CDATA[ ]]><b>using</b> operator in your search query like this:</p>
        <p class="Indent"><b>keyword expression | parse using public/name_of_parsing_library</b>
        </p>
        <p>When you apply a parser library to your search, your messages are parsed into named fields automatically. You can extend your query using the named fields. For example, if you were investigating which were the top URLs served from your website by byte size, you could use this query:</p>
        <p class="code">_sourceName=*access+log* AND _sourceCategory=*apache* | parse using public/apache/access | avg(size) as average_size_KB by url | sort by average_size_KB | limit 100 | (average_size_KB/1000) as average_size_KB | (toLong(average_size_KB*100)/100) as average_size_KB</p>
        <p>In the example above, the <b>size</b> field is automatically parsed and named so the query can begin by calculating the average size based on the <b>size</b> field. Without using the parser, you would first need to manually extract and name the <b>size</b> field using a <b>parse anchor</b> or <b>parse regex </b>expression<b>.</b></p>
        <h2>Understanding Parser Hierarchies</h2>
        <p>The Parser Libraries are arranged as hierarchical sets which include more specific subsets. When you invoke the parser, you can choose the level of generality or specificity to apply to your search. For example, the parent Apache parser currently contains two child subsets: one for parsing Apache error logs and one for parsing Apache access logs. </p>
        <p class="Note"><span style="font-weight: normal;">Apache 2.2 refers to parsing rules relevant to logs coming from Apache v2.2. Apache 2.4 refers to parsing rules relevant to logs coming from Apache v2.4.</span>
        </p>
        <p>Let's look at some examples. Using the Apache Parser Library, you can invoke the entire set of parsing definitions like this:</p>
        <p class="code">&lt;keyword expression filtering for Apache logs&gt; | parse using public/apache</p>
        <p>Since the global Apache parser includes definitions for 14 named fields, your results will show 14 labeled columns in the Messages tab.</p>
        <p>It's recommended that you write a query to invoke a more specific subset of definitions; the more specific parser library definition you invoke, the faster you'll get results. For example, to parse log messages relevant to Apache version 2.4, use the following query:</p>
        <p class="code">&lt;keyword expression filtering for Apache errors&gt;  | parse using public/apache/error/2.4</p>
        <p>Since the more specific Apache errors version 2.4 parser includes definitions for only three fields, your results will show three labeled columns in the Messages tab.</p>
        <p class="Tip">The Sumo Logic Parser Library is divided into two sets: public and organization-specific. The public parsers are available to everyone. The organization-specific parsers are private and only available to users within an organization. If you would like Sumo Logic to build an organization-specific parser library for your logs, please contact your Technical Sales Representative or <a href="https://sumologic.zendesk.com/anonymous_requests/new" target="_blank">file a Support request</a>.</p>
        <h2>Understanding Matching</h2>
        <p>To apply the <b>apache</b> set of parsing rules to your search:</p>
        <ol>
            <li value="1">In the search query field, type any keyword expression to filter on your Apache logs (or type an asterisk [*] wildcard). </li>
            <li value="2">Then type a pipe symbol and the <b>parse using</b> operator followed by the path to the parser (public/apache). </li>
            <li value="3">Extend your query using operators such as <b>where</b> or <b>sort</b> with the automatically parsed fields (src_ip, url, referrer, status_code, size, or user_agent). </li>
        </ol>
        <p>For example, this search:</p>
        <p class="Indent" style="font-weight: bold;">_sourceCategory=apache | parse using public/apache/access | count by status_code | sort by status_code</p>
        <p>yields these results (plus additional fields) with no manual parsing required since the field <b>status_code</b> is parsed for you:</p>
        <p>
            <img src="Resources/Images/parse-using-results.png" />
        </p>
        <p>Notice that the first group of messages (#1) in the example above has an empty <b>status_code</b> column. When using parser libraries, messages that match any single parsing definition (not all parsing definitions) are included in results. So, in the example above, 12 messages matched at least one parsing definition, but did not include status codes.</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom" style="display: none;"><a href="Default.htm#Extracting_Fields_with_Parsers.htm">Open topic with navigation</a>
        </p>
    </body>
</html>