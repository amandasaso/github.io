<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="no-feedback" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Operators &amp; Expressions|Summarize Operator">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Using Summarize Delta</title>
        <link href="Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="Resources/Stylesheets/Styles.css" rel="stylesheet" />
        <script src="Resources/Scripts/jquery.min.js">
        </script>
        <script src="Resources/Scripts/plugins.min.js">
        </script>
        <script src="Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop" style="display: none;"><a href="Default.htm#Summarize_Delta_Option.htm">Open topic with navigation</a>
        </p>
        <script type="text/javascript">/* <![CDATA[ */
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-16579649-1']);
			_gaq.push(['_trackPageview']);
			(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
		/* ]]> */</script>
        <h1>Using Summarize Delta</h1>
        <p>With Summarize Delta, you can save a baseline summarize pattern, and then later run a delta against the baseline. Sumo Logic will report the variance giving you insight into the shifts in patterns over time.</p>
        <p> The baseline saves as a summarize pattern independent of the time range or the keywords used for the baseline. You can run a delta against the baseline even if you are using different keywords or a different time range.</p>
        <p style="font-weight: bold;">To run a Summarize Delta:</p>
        <ol>
            <li value="1">Save a baseline using a path-like naming structure. For example, the query might look like:</li>
        </ol>
        <p class="Indent"><b>error or failure | summarize save /your_category/errors_baseline</b>
        </p>
        <p class="IndentNote">Make a note of the baseline name since there is currently no UI to save this for you.</p>
        <ol data-mc-continue="true">
            <li value="2">When you're ready, run a <b>delta</b> against the saved baseline, either using the same keyword expression, or a new keyword expression. So the delta query might look like:</li>
        </ol>
        <p class="Indent"><b>exceptions | summarize delta /your_category/errors_baseline</b>
        </p>
        <p class="Indent">&#160;</p>
        <h2>Understanding Summarize Delta results</h2>
        <p>In the delta results, you might see that some clusters are "gone" and some are "new," especially if you have used a keyword expression that is different from the baseline. You will also see some new information displayed in the Count column for results in the Web Application. These include:</p>
        <ul>
            <li value="1"><b>Delta Percentage.</b> The delta percentage is the straight percentage change in the number of messages divided by the historical count percentage, which is the historical count change over time since the initial count results for this cluster.</li>
            <li value="2"><b>New.</b> When the word <b>New</b> appears, the cluster did not exist in the original baseline.</li>
            <li value="3"><b>Gone.</b> When the word <b>Gone</b> appears, a previous cluster did not return in the delta summarize.</li>
        </ul>
        <h2>Options</h2>
        <p>There are a few options to use with the Summarize Delta feature including update, purge, and nopurge.</p>
        <p><b>update.</b> You can update the saved baseline at any time using the update option. When you use the update option, empty clusters older than 7 days are purged and the new summarize results are saved as the baseline. The syntax is as follows:</p>
        <p><code>&lt;keyword expression&gt; | summarize delta path/to/named_baseline update</code>
        </p>
        <p><b>purge.</b> You can combine update and purge to overwrite the baseline and remove empty clusters at the same time. With the purge option, you can set a specific time period other than 7 days to purge empty clusters. The syntax for the time expression is relative to now. In this example, we are updating the baseline and purging clusters older than 3 days:</p>
        <p><code>&lt;keyword expression&gt; | summarize delta path/to/named_baseline update purge 3d</code>
        </p>
        <p><b>nopurge.</b> Additionally, you have the option to keep empty clusters indefinitely using the nopurge option:</p>
        <p><code>&lt;keyword expression&gt; | summarize delta path/to/named_baseline update nopurge</code>
        </p>
        <h2>Extending Summarize Delta with the Where Operator</h2>
        <p>When you use the Summarize operator, new fields are created that you can use to focus your delta results. For example, you can run the query:</p>
        <p><code>&lt;keyword expression&gt; | summarize delta path/to/named_baseline | where (_isNew)</code>
        </p>
        <p>The query results are constrained to new clusters only using the _isNew field.</p>
        <p>In this example query, the summarize command shows only clusters that no longer include any messages:</p>
        <p><code>&lt;keyword expression&gt; | summarize delta path/to/named_baseline | where _count ==0</code>
        </p>
        <h2>Field	Descriptions</h2>
        <p>The fields created with the Summarize query include the following.</p>
        <p>&#160;</p>
        <table>
            <col style="width: 183px;" />
            <col style="width: 451px;" />
            <tbody>
                <tr>
                    <td style="font-size: 9pt;"><b>Field</b>
                    </td>
                    <td style="font-size: 9pt;"><b>Description</b>
                    </td>
                </tr>
                <tr>
                    <td style="font-size: 9pt;">
                        <p>_count</p>
                    </td>
                    <td style="font-size: 9pt;">
                        <p>The number of log messages that belong to this cluster for this query.</p>
                    </td>
                </tr>
                <tr>
                    <td style="font-size: 9pt;">
                        <p>_percentage</p>
                    </td>
                    <td style="font-size: 9pt;">
                        <p>The delta percentage change between the total number of messages and the previous _count.</p>
                    </td>
                </tr>
                <tr>
                    <td style="font-size: 9pt;">
                        <p>_historicalCount</p>
                    </td>
                    <td style="font-size: 9pt;">
                        <p>The count of the last time this cluster had non-zero number of matching logs.</p>
                    </td>
                </tr>
                <tr>
                    <td style="font-size: 9pt;">
                        <p>_historicalPercentage</p>
                    </td>
                    <td style="font-size: 9pt;">
                        <p>_percentage of the last non-zero encounter.</p>
                    </td>
                </tr>
                <tr>
                    <td style="font-size: 9pt;">
                        <p>_deltaPercentage</p>
                    </td>
                    <td style="font-size: 9pt;">
                        <p>The delta percent change over time calculated as (_percent minus _historicalPercentage) divided by_historical Percentage</p>
                    </td>
                </tr>
                <tr>
                    <td style="font-size: 9pt;">
                        <p>_anomalyScore</p>
                    </td>
                    <td style="font-size: 9pt;">
                        <p>The anomaly score gives you a sense of the weight of the delta change and is defined as Math.abs(_deltaPercentage) times the Math.max(_percentage, _historicalPercentage)</p>
                    </td>
                </tr>
                <tr>
                    <td style="font-size: 9pt;">
                        <p>_isNew</p>
                    </td>
                    <td style="font-size: 9pt;">
                        <p>True if the cluster is new, otherwise false.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p>&#160;</p>
        <p>&#160;</p>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom" style="display: none;"><a href="Default.htm#Summarize_Delta_Option.htm">Open topic with navigation</a>
        </p>
    </body>
</html>