<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="no-feedback" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Operators &amp; Expressions">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Difference (Diff) Operator</title>
        <link href="Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="Resources/Stylesheets/Styles.css" rel="stylesheet" />
        <script src="Resources/Scripts/jquery.min.js">
        </script>
        <script src="Resources/Scripts/plugins.min.js">
        </script>
        <script src="Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop" style="display: none;"><a href="Default.htm#Diff_Operator.htm">Open topic with navigation</a>
        </p>
        <script type="text/javascript">/* <![CDATA[ */
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-16579649-1']);
			_gaq.push(['_trackPageview']);
			(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
		/* ]]> */</script>
        <h1>Difference (Diff) Operator</h1>
        <p>The diff operator calculates the rate of change in a field between consecutive rows. To produce results, diff requires that a specified field contain numeric data; any non-numerical values are removed from the search results.</p>
        <p>Diff doesn't sort data, but instead operates on rows in the order that they appear in the input stream, subtracting the number in a field from the number in the same field in the previous line. (Note that the first line of results will never display diff results.) </p>
        <p>Adding a group by function to a diff operator query calculates the difference between consecutive values in each group (data from each group are calculated separately). Grouping doesn't affect the order in which rows appear in the output stream.</p>
        <p style="font-weight: bold;">Syntax:</p>
        <ul>
            <li value="1">...diff field [as alias] [by field1, field2, ...]</li>
        </ul>
        <p class="Indent">&#160;</p>
        <p><b>Rules:</b>
        </p>
        <ul>
            <li value="1">An alias for diff is optional. When an alias is not provided, _diff is the default alias.</li>
            <li value="2">Specified fields must contain numeric values. </li>
            <li value="3">If a row contains non-numeric values, that row will be skipped; diff uses the row before that (until it finds an acceptable row with a numeric value).</li>
            <li value="4">The diff corresponding to the first row in any results is null (empty).</li>
            <li value="5">To add a query that includes a diff operator to a Dashboard, you must add a group by function before the diff operator.<br /></li>
        </ul>
        <p>&#160;</p>
        <p><b>Examples:</b>
        </p>
        <p><b>Using diff to calculate the difference of a quantity between time points.</b> Using diff with timeslice, you can run a query similar to:</p>
        <p class="Indent">* | parse "bytes transmited: '*'" as bytes | timeslice 1m | sum(bytes) as bytes by _timeslice | sort _timeslice | diff bytes as diff_bytes</p>
        <p>to produce results similar to:</p>
        <p>
            <img src="Resources/Images/Diff_withTimeslice.png" />
        </p>
        <p>Note that there is no value for diff_bytes in line 1, as expected.</p>
        <p><b>Using multiple diff operators.</b> Multiple diff operators can be included in a single query. For example, to calculate the diff of bytes and compressed bytes:</p>
        <p class="Indent">* | parse "data: '*'" as Bytes | diff Bytes as b | parse "compress: '*'" as Compressed | diff Compressed as c</p>
        <p><b>Adding a diff operator query to a Dashboad.</b> To add a query that includes a diff operator, make sure to structure your query similar to:</p>
        <p class="Indent">* | parse "encoded: '*'" as e | parse "compressed: '*'" as c | count by d | diff e as d</p>
        <p>If your query isn't compatible with a Dashboard, an error message appears when you attempt to add it.</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom" style="display: none;"><a href="Default.htm#Diff_Operator.htm">Open topic with navigation</a>
        </p>
    </body>
</html>